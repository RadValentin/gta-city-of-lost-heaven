# Development Log

1. **29 Jul 2020** - Managed to find the mod hosted on [libertycity.ru](https://libertycity.ru/files/gta-vice-city/32150-the-city-of-lost-heaven.html). As far as I can tell, this is the same version that I played back in 2005 and the only one to my knowledge. Luckily, I also find a way to unpack the translation files with [GXT Extractor](https://github.com/CookiePLMonster/GXT-Extractor). The command is `python gxt-extract.py mod/american.gxt` but it does require a newer version of Python, I'm using `3.8.5`.
1. **30 Aug 2020** - Going through the unpacked translations I notice that instead of cyrilic glyps, the text files contain weird junk characters. At first I suspect there's something wrong with either my editor or the extractor but after a few hours of troubleshooting I realize that `GTA: Vice City` did not ship with support for non-EFIGS languages. Now comes the realization that the text files are actually correct, all those weird characters can map to valid ones when the game's running if we provide it an updated `fonts.txd`. And guess what, that file was never included with the mod so it's impossible to tell what maps to what ðŸ˜¢
1. **31 Aug 2020** - Found another repo where someone went through the same thought process as me: [Vice-City-Russian-1C-GXT](https://github.com/DelmorS/Vice-City-Russian-1C-GXT). Their solution: spend hours with "Find and Replace" going through the whole alphabet, making corrections, praying it will somehow work out in the end. Even for an expert Russian speaker this is a sisyphean task... good thing I don't speak Russian ðŸ˜‚
1. **1 Aug 2020** - I've assembled my toolset: Google Translate, the official Vice City English translation, the Russian translation with proper characters put together by DelmorS and the Russian translation for the mod with broken characters. I go through the files in parallel replacing characters, checking that words make sense and eventually I'm left with something that resembles a written language.
1. **1 Aug 2020** - Looking at the files and comparing them to the American translation, it looks like the unique lines of text in this mod are all located in `MAIN.txt`. At 2453 lines of text, this is the largest translation file in the game but on the plus side we're down to 1 text file from 79!
1. **10 Aug 2020** - I was browsing the [forum thread](https://gtaforums.com/topic/177544-city-of-lost-heaven/) where "City of Lost Heaven" was first released and saw that one of the posters had reuploaded the mod after the original link died. There was no mention of it being in any way different but this reuploaded version had translations from `Feb 2005` (vs `Jan 2005` for the version I had) and they're in English. By using trusty WinMerge to compare the extracted files, I was able to isolate 67 unique lines of text. Looks like it's smooth sailing from here on out ðŸ˜Ž
1. **12 Aug 2020** - Diffed the Russian translation against the broken English one, took the resulting lines to text and spliced them onto the official English translation. The game can be played and understood by western gamers now but the quality of the language used is very rough. I've set up a PR to polish up the text. I also need to identify any lines of text missed by the diff by decompiling the `main.scm` script and going through the mission code.
1. **17 Aug 2020** - Took a break and decided to focus on the texture files (`.TXD`), none of them would open with a modern editor (*MAGIC.TXD*). I extracted the image assets and set up a folder structure so that the editor can rebuild them. Making changes to these files is now a matter of pressing a single button.
1. **26 Aug 2020** - I downloaded a version of CoLH that was already installed on top of VC. This version didn't have the actual mission text in BUT, weirdly enough it did have the `fonts.txd` file for the Russian translation. This is great news, I can now run the game in Russian and there won't be any weird glyphs in-game at least. Should help with translation efforts as well. Nice!
